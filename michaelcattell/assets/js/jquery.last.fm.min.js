!function(i){i.fn.lfm=function(t){function a(t){for(var a=0;a<l.length;a++){var e=i("<div class='album'><div class='front'><img src='"+l[a].art+"'><div class='alpha'></div></div><div class='back'><h2>"+l[a].artist+"</h2><h1>"+l[a].name+"</h1><h3>"+l[a].played+" tracks played</h3></div></div>");t.append(e)}"hover"==s.Behavior?t.find(".album").hover(function(){i(this).addClass("flip")},function(){i(this).removeClass("flip")}):(i(document).bind("click",function(){i(".flip").removeClass("flip")}),t.find(".album").click(function(t){t.stopPropagation(),i(".flip")[0]===this?i(this).removeClass("flip"):(i(".flip").removeClass("flip"),i(this).addClass("flip"))}))}var s=i.extend({APIkey:null,User:null,Behavior:"hover",limit:20,period:"3month"},t),e="http://ws.audioscrobbler.com/2.0/?method=user.gettopalbums&user="+s.User+"&period="+s.period+"&api_key="+s.APIkey+"&format=json&limit="+s.limit+"&callback=?",l=[];return this.each(function(){var t=i(this);i.getJSON(e,function(s){i(s.topalbums.album).each(function(){l.push({name:this.name,artist:this.artist.name,played:this.playcount,art:this.image[this.image.length-1]["#text"]})}),a(t)})})}}(jQuery);
